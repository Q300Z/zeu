!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.zeu=e():t.zeu=e()}(Object("undefined"!=typeof self?self:this),()=>(()=>{"use strict";var t={d:(e,i)=>{for(var s in i)t.o(i,s)&&!t.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:i[s]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)},e={};t.d(e,{default:()=>d});const i={requestAnimationFrameArray:[]},s=new class{constructor(){this.render=this.render.bind(this),this._fps=60,this._fpsInterval=1e3/this._fps,this._lastFrame=Date.now(),window.requestAnimationFrame||(window.requestAnimFrame=()=>window.webkitRequestAnimationFrame(this.render)||window.mozRequestAnimationFrame(this.render)||window.oRequestAnimationFrame(this.render)||window.msRequestAnimationFrame(this.render))}render(){const t=Date.now(),e=t-this._lastFrame;if(e>this._fpsInterval){this._lastFrame=t-e%this._fpsInterval;for(let t=0;t<i.requestAnimationFrameArray.length;t++){const e=i.requestAnimationFrameArray[t];e.func.call(e.self)}}window.requestAnimationFrame(this.render)}setFps(t){this._fps=t,this._fpsInterval=1e3/this._fps}},h=new class{constructor(){this._fps=60}set fps(t){this._fps=t,s.setFps(t)}get fps(){return this._fps}},r={lightGreen:"#00d7af",lightWhite:"#f8f8ff",lightGrey:"#e0e0e0",lightBlack:"#343a42",black:"#000000",white:"#ffffff",red:"#dc3547",blue:"#007bfb",yellow:"#ffc108",cyan:"#17a2b9",grey:"#6c757e",green:"#28a748",orange:"#ffa500",transparent:"rgba(255, 255, 255, 0)"};class o{constructor(){this._listeners=[],this._theme=r}static getInstance(){return o._instance||(o._instance=new o),o._instance}get theme(){return this._theme}set theme(t){this._theme=t,this.notify()}subscribe(t){this._listeners.push(t)}unsubscribe(t){this._listeners=this._listeners.filter(e=>e!==t)}get listenerCount(){return this._listeners.length}notify(){this._listeners.forEach(t=>t())}}const a=new Proxy({},{get:(t,e)=>o.getInstance().theme[e]});class _{constructor(){}static getRandomInt(t,e){return Math.floor(Math.random()*(e-t+1))+t}static getRandomColor(){return"#"+((1<<24)*Math.random()|0).toString(16)}static has(t,e){return!!t&&Object.prototype.hasOwnProperty.call(t,e)}static addHour(t){const e=new Date;return e.setHours(e.getHours()+t),e}static getAngleByDate(t,e){return t*Math.PI/6*e.getSeconds()+t*Math.PI/6e3*e.getMilliseconds()}static getNextAngleByDegree(t,e){return t>=360?0:t+e}static getAngleByDegree(t){return t*Math.PI/180}static hexToRgba(t,e){const i=t.replace("#","");return"rgba("+parseInt(i.substring(0,2),16)+","+parseInt(i.substring(2,4),16)+","+parseInt(i.substring(4,6),16)+","+e/100+")"}static hexToRgb(t){const e=t.replace("#",""),i=[];return i[0]=parseInt(e.substring(0,2),16),i[1]=parseInt(e.substring(2,4),16),i[2]=parseInt(e.substring(4,6),16),i}static hex(t){const e="0123456789abcdef";if(isNaN(t))return"00";const i=Math.round(Math.min(Math.max(0,t),255));return e.charAt((i-i%16)/16)+e.charAt(i%16)}static convertToHex(t){return this.hex(t[0])+this.hex(t[1])+this.hex(t[2])}static generateGradientColor(t,e,i){const s=this.hexToRgb(t),h=this.hexToRgb(e),r=i;let o=0;const a=[];for(let t=0;t<r;t++){const t=[];o+=1/r,t[0]=s[0]*o+(1-o)*h[0],t[1]=s[1]*o+(1-o)*h[1],t[2]=s[2]*o+(1-o)*h[2],a.push(this.convertToHex(t))}return a}static isDefined(t){return null!=t}static leftPadZero(t){return t<10?"0"+t:t}static getNextPos(t,e,i){return i>0&&t+i>=e||i<0&&t+i<=e?e:t+i}static shuffleArray(t){let e,i=0;for(let s=t.length-1;s>0;s--)i=Math.floor(Math.random()*(s+1)),e=t[s],t[s]=t[i],t[i]=e;return t}static prepareCanvas(t,e){const i=window.devicePixelRatio||1,s=t.getBoundingClientRect();t.width===s.width*i&&t.height===s.height*i||(t.width=s.width*i,t.height=s.height*i,t.style.width=s.width+"px",t.style.height=s.height+"px",e.scale(i,i))}}class l{constructor(t){this._ctx=t}fillRect(t,e,i,s,h){this._ctx.beginPath(),this._ctx.fillStyle=h,this._ctx.fillRect(t,e,i,s),this._ctx.closePath()}fillTriangle(t,e,i,s,h,r,o){this._ctx.beginPath(),this._ctx.fillStyle=o,this._ctx.moveTo(t,e),this._ctx.lineTo(i,s),this._ctx.lineTo(h,r),this._ctx.fill(),this._ctx.closePath()}fillText(t,e,i,s,h,r){this._ctx.beginPath(),this._ctx.font=s,this._ctx.textAlign=h,this._ctx.fillStyle=r,this._ctx.fillText(t,e,i),this._ctx.closePath()}line(t,e,i,s,h,r){this._ctx.beginPath(),this._ctx.lineWidth=h,this._ctx.strokeStyle=r,this._ctx.moveTo(t,e),this._ctx.lineTo(i,s),this._ctx.closePath(),this._ctx.stroke()}fillCircle(t,e,i,s){this._ctx.beginPath(),this._ctx.fillStyle=s,this._ctx.arc(t,e,i,0,2*Math.PI),this._ctx.fill(),this._ctx.closePath()}}class n{get theme(){return o.getInstance().theme}constructor(t,e={},i,s){var h;const r=document.getElementById(t);if(!(r&&r instanceof HTMLCanvasElement))throw new Error(`Canvas element with id '${t}' not found or is not a canvas.`);this._canvas=r;const n=this._canvas.getContext("2d");if(!n)throw new Error("Could not get 2d context from canvas.");this._ctx=n,_.prepareCanvas(this._canvas,this._ctx),this._offscreenCanvas=document.createElement("canvas");const c=this._offscreenCanvas.getContext("2d");if(!c)throw new Error("Could not get 2d context from offscreen canvas.");this._offscreenCtx=c,this._staticRendered=!1,this._x=0,this._y=0,this._viewWidth=i,this._viewHeight=s,this._width=i,this._height=s,this._scaleX=1,this._scaleY=1;const d=this._canvas.height||(null===(h=this._canvas.parentNode)||void 0===h?void 0:h.clientHeight)||s;this.scaleByHeight(d),this._display=!0,this._eventQueue=[],this.drawFrame=this.drawFrame.bind(this),this._shape=new l(this._ctx);const g={on:!1,lastCall:0,dashOffSet:0,text:"",interval:1500,lineColor:a.red,fontColor:a.red,bgColor:a.yellow};this._alert=g,this.alertFunc=this.alertFunc.bind(this),this._dirty=!0,this._themeListener=()=>{this._dirty=!0,this._staticRendered=!1},o.getInstance().subscribe(this._themeListener),this.setOptions(e),this.postConstructor()}setOptions(t){}postConstructor(){this.removeFromAnimationQueue(),this.addToAnimationQueue()}drawFrame(){if(this._eventQueue.length>0){const t=this._eventQueue[0];"move"===t.type&&(this._x===t.destX&&this._y===t.destY?this._eventQueue.shift():(this._x=_.getNextPos(this._x,t.destX,t.speedX),this._y=_.getNextPos(this._y,t.destY,t.speedY),this._dirty=!0))}this.isDisplay()&&(this._dirty||this.isAlert())&&(this.clear(),this.save(),this.drawObject(),this._ctx.restore(),this.isAlert()&&(this.save(),this._alert.lastCall=this.nextAlert(this.alertFunc,this._alert.lastCall,this._alert.interval),this._ctx.restore()),0!==this._eventQueue.length||this.isAlert()||this.isAnimating()||(this._dirty=!1))}isAnimating(){return!1}drawObject(){}drawStatic(){}drawOffscreen(){this._staticRendered||(this.drawStatic(),this._staticRendered=!0),this._ctx.drawImage(this._offscreenCanvas,0,0,this._offscreenCanvas.width,this._offscreenCanvas.height,this._x,this._y,this._width,this._height)}clear(){this._ctx.clearRect(this._x,this._y,this._width,this._height)}scale(){this._ctx.scale(this._scaleX,this._scaleY)}save(){this._ctx.save(),this.scale()}addToAnimationQueue(){-1===this.getAnimationFrameArrayPos()&&i.requestAnimationFrameArray.push(this.drawFrameObj())}removeFromAnimationQueue(){const t=this.getAnimationFrameArrayPos();-1!==t&&i.requestAnimationFrameArray.splice(t,1)}drawFrameObj(){return{func:this.drawFrame,self:this}}getAnimationFrameArrayPos(){return i.requestAnimationFrameArray.findIndex(t=>t.self===this)}get isAnimationOn(){return-1!==this.getAnimationFrameArrayPos()}nextAlert(t,e,i){const s=Date.now();return s-e<i?(t.call(this),e):s-e<2*i?e:s}alertFunc(){this._shape.fillRect(this._x,this._y,this._width,this._height,this._alert.bgColor),this._ctx.setLineDash([20,16]),this._ctx.lineDashOffset=-this._alert.dashOffSet,this._ctx.lineWidth=20,this._ctx.strokeStyle=this._alert.lineColor,this._ctx.strokeRect(this._x,this._y,this._width,this._height),this._alert.dashOffSet++,this._alert.dashOffSet>32&&(this._alert.dashOffSet=0),this._shape.fillText(this._alert.text,(this._width-this._x)/2,(this._height-this._y)/2+10,"Bold 30px Arial","center",this._alert.fontColor)}destroy(){o.getInstance().unsubscribe(this._themeListener),this.removeFromAnimationQueue(),this.clear(),this._canvas=null,this._ctx=null,this._alert=null}alertOn(t={}){this._alert.text=t.text||"ALERT",this._alert.interval=t.interval||1500,this._alert.bgColor=t.bgColor||a.yellow,this._alert.fontColor=t.fontColor||a.red,this._alert.lineColor=t.lineColor||a.red,this._alert.on=!0,this._dirty=!0}alertOff(){this._alert.on=!1,this._dirty=!0}isAlert(){return this._alert.on}moveTo(t,e,i){let s=this._x,h=this._y;for(let t=this._eventQueue.length-1;t>=0;t--){const e=this._eventQueue[t];if("move"===e.type){s=e.destX,h=e.destY;break}}const r=i/60,o=Math.abs(t-s)/r,a=Math.abs(e-h)/r,_=t>s?o:-o,l=e>h?a:-a;return this._eventQueue.push({type:"move",destX:t,destY:e,speedX:_,speedY:l}),this}scaleTo(t,e){return this._scaleX=t,this._scaleY=e,this._width=this._scaleX*this._viewWidth,this._height=this._scaleY*this._viewHeight,this._dirty=!0,this}scaleByHeight(t){this._scaleY=t/this._viewHeight,this._scaleX=this._scaleY,this._width=this._scaleX*this._viewWidth,this._height=this._scaleY*this._viewHeight;const e=window.devicePixelRatio||1;return this._offscreenCanvas.width=this._width*e,this._offscreenCanvas.height=this._height*e,this._offscreenCtx.setTransform(1,0,0,1,0,0),this._offscreenCtx.scale(e*this._scaleX,e*this._scaleY),this._staticRendered=!1,this._dirty=!0,this}show(){this._display=!0,this._dirty=!0}hide(){this._display=!1}isDisplay(){return this._display}get canvas(){return this._canvas}get context(){return this._ctx}get eventQueue(){return this._eventQueue}get viewWidth(){return this._viewWidth}get viewHeight(){return this._viewHeight}}class c{constructor(t,e,i,s,h,r){this._ctx=t,this._barWidth=e,this._verBarHeight=(s-3*e)/2,this._horBarHeight=i-2*e,this._dashColor=h,this._numberColor=r}drawColon(){this._ctx.beginPath(),this._ctx.fillStyle=this._numberColor,this._ctx.fillRect(0,(2*this._verBarHeight+this._barWidth)/3,this._barWidth,this._barWidth),this._ctx.fillRect(0,(2*this._verBarHeight+this._barWidth)/3*2+this._barWidth,this._barWidth,this._barWidth),this._ctx.closePath()}drawEmpty(){this._ctx.beginPath(),this._ctx.fillStyle=this._dashColor,this._ctx.moveTo(0,0),this.topLeft(),this.bottomLeft(),this.topRight(),this.bottomRight(),this.top(),this.middle(),this.bottom(),this._ctx.closePath()}topLeft(){this._ctx.fillRect(0,this._barWidth,this._barWidth,this._verBarHeight)}bottomLeft(){this._ctx.fillRect(0,2*this._barWidth+this._verBarHeight,this._barWidth,this._verBarHeight)}topRight(){this._ctx.fillRect(this._barWidth+this._horBarHeight,this._barWidth,this._barWidth,this._verBarHeight)}bottomRight(){this._ctx.fillRect(this._barWidth+this._horBarHeight,2*this._barWidth+this._verBarHeight,this._barWidth,this._verBarHeight)}top(){this._ctx.fillRect(this._barWidth,0,this._horBarHeight,this._barWidth)}middle(){this._ctx.fillRect(this._barWidth,this._barWidth+this._verBarHeight,this._horBarHeight,this._barWidth)}bottom(){this._ctx.fillRect(this._barWidth,2*this._barWidth+2*this._verBarHeight,this._horBarHeight,this._barWidth)}drawNumber(t){switch(this.drawEmpty(),this._ctx.beginPath(),this._ctx.fillStyle=this._numberColor,t){case 0:this.top(),this.bottom(),this.topLeft(),this.topRight(),this.bottomLeft(),this.bottomRight();break;case 1:this.topRight(),this.bottomRight();break;case 2:this.top(),this.topRight(),this.middle(),this.bottomLeft(),this.bottom();break;case 3:this.top(),this.middle(),this.bottom(),this.topRight(),this.bottomRight();break;case 4:this.middle(),this.topLeft(),this.topRight(),this.bottomRight();break;case 5:this.top(),this.middle(),this.bottom(),this.topLeft(),this.bottomRight();break;case 6:this.top(),this.middle(),this.bottom(),this.topLeft(),this.bottomLeft(),this.bottomRight();break;case 7:this.top(),this.topRight(),this.bottomRight();break;case 8:this.topLeft(),this.bottomLeft(),this.topRight(),this.bottomRight(),this.top(),this.middle(),this.bottom();break;case 9:this.top(),this.middle(),this.topLeft(),this.topRight(),this.bottomRight()}this._ctx.closePath()}}const d={Settings:h,BaseComponent:n,ThemeManager:o,BarMeter:class extends n{constructor(t,e={}){super(t,e,e.viewWidth||100,200),this._currBar=0,this._barHeight=15,this._barWidth=this._viewWidth-2*this._space,this._numberOfBars=Math.floor((this._value-this._min)/(this._max-this._min)*10),this._barMax=100*this._numberOfBars}setOptions(t={}){this._min=void 0!==t.min?t.min:0,this._max=void 0!==t.max?t.max:100,this._value=void 0!==t.value?t.value:0,this.dashColor=t.dashColor||(this.theme?this.theme.grey:a.grey),this.barColor=t.barColor||(this.theme?this.theme.green:a.green),this.speed=void 0!==t.speed?t.speed:5,this._isGradient=t.gradient||!1,this._space=void 0!==t.space?t.space:20}isAnimating(){return this._currBar<this._barMax}drawObject(){if(this.drawOffscreen(),this._currBar>=this._barMax)this._currBar=-100;else{const t=this._currBar/100;let e=[];this._isGradient?e=_.generateGradientColor(this.theme.white,this.barColor,t):this._ctx.fillStyle=this.barColor;for(let i=0;i<t;i++){const t=this._viewHeight-(15+20*i);this._isGradient&&(this._ctx.fillStyle="#"+e[i]),this._ctx.beginPath(),this._ctx.fillRect(this._space,t,this._barWidth,this._barHeight),this._ctx.closePath()}this._currBar+=this.speed,this._dirty=!0}}drawStatic(){for(let t=0;t<10;t++){const e=5+20*t;this._offscreenCtx.fillStyle=this.dashColor,this._offscreenCtx.fillRect(this._space,e,this._barWidth,this._barHeight)}}set value(t){this._value=t,this._numberOfBars=Math.floor((this._value-this._min)/(this._max-this._min)*10),this._barMax=100*this._numberOfBars,this._dirty=!0}get valuePct(){return Math.floor((this._value-this._min)/(this._max-this._min)*100)}},DigitalClock:class extends n{constructor(t,e={}){super(t,e,400,100),this._barWidth=8,this._space=12,this._numberWidth=50,this._numberHeight=100,this._timer=null,this._ds=new c(this._ctx,this._barWidth,this._numberWidth,this._numberHeight,this._dashColor,this._numberColor)}postConstructor(){super.postConstructor(),this.tick()}setOptions(t={}){this._numberColor=t.numberColor||(this.theme?this.theme.red:a.red),this._dashColor=t.dashColor||(this.theme?this.theme.lightGrey:a.lightGrey),this._hourOffset=t.hourOffset||0}destroy(){this.stopTick(),super.destroy()}tick(){null==this._timer&&(this._timer=setInterval(()=>{this.drawTime()},1e3))}stopTick(){null!=this._timer&&(clearInterval(this._timer),this._timer=null)}isAnimating(){return!0}drawTime(){const t=_.addHour(this._hourOffset);this.clear(),this.save(),this.drawTwoDigits(this._ds,t.getHours(),this._numberWidth+this._space),this._ds.drawColon(),this._ctx.translate(this._barWidth+this._space,0),this.drawTwoDigits(this._ds,t.getMinutes(),this._numberWidth+this._space),this._ds.drawColon(),this._ctx.translate(this._barWidth+this._space,0),this.drawTwoDigits(this._ds,t.getSeconds(),this._numberWidth+this._space),this._ctx.restore(),this._dirty=!0}drawTwoDigits(t,e,i){if(e<10)t.drawNumber(0),this._ctx.translate(i,0),t.drawNumber(e),this._ctx.translate(i,0);else{const s=Math.floor(e/10),h=e%10;t.drawNumber(s),this._ctx.translate(i,0),t.drawNumber(h),this._ctx.translate(i,0)}}},VolumeMeter:class extends n{constructor(t,e={}){super(t,e,100,e.viewHeight||200),this._lineWidth=3,this._numberHeight=20,this._minMax="min",this._minValue=0,this._maxValue=100,this._minFontColor=a.white,this._minBgColor=a.red,this._maxFontColor=a.white,this._maxBgColor=a.blue,this._barBorderColor=a.black,this.barFillColor=a.green,this._isGraident=!1,this._speed=5,this.markerBgColor=a.yellow,this._markerFontColor=a.white,this._internalValue=0,this._meterWidth=this._viewWidth/2,this._meterHeight=this._viewHeight-2*this._numberHeight,this._numberStart=(this._viewWidth-this._meterWidth-this._lineWidth)/2,this._actualValue=this._internalValue,this._barY=this._viewHeight-(this._internalValue-this._minValue)/(this._maxValue-this._minValue)*this._meterHeight-this._numberHeight,this._nextBarY=this._barY}setOptions(t={}){const e=t.min||{},i=t.max||{},s=t.bar||{},h=t.marker||{};this._minFontColor=e.fontColor||(this.theme?this.theme.white:a.white),this._minValue=void 0!==e.value?e.value:0,this._minBgColor=e.bgColor||(this.theme?this.theme.red:a.red),this._maxFontColor=i.fontColor||(this.theme?this.theme.white:a.white),this._maxValue=void 0!==i.value?i.value:100,this._maxBgColor=i.bgColor||(this.theme?this.theme.blue:a.blue),this._barBorderColor=s.borderColor||(this.theme?this.theme.black:a.black),this.barFillColor=s.fillColor||(this.theme?this.theme.green:a.green),this._isGraident=s.graident||!1,this._speed=s.speed||5,this.markerBgColor=h.bgColor||(this.theme?this.theme.yellow:a.yellow),this._markerFontColor=h.fontColor||(this.theme?this.theme.white:a.white),this._internalValue=t.value||0}isAnimating(){return this._barY!==this._nextBarY}drawObject(){let t=this.barFillColor;if(this._isGraident){const e=this._ctx.createLinearGradient(this._viewWidth/2,this._barY,this._viewWidth/2,this._meterHeight+this._numberHeight);e.addColorStop(0,this.barFillColor),e.addColorStop(1,"white"),t=e}this._shape.fillRect((this._viewWidth-this._meterWidth)/2,this._barY,this._meterWidth,this._viewHeight-this._barY-this._numberHeight,t),this._ctx.beginPath(),this._ctx.lineWidth=this._lineWidth,this._ctx.strokeStyle=this._barBorderColor,this._ctx.rect((this._viewWidth-this._meterWidth)/2,this._numberHeight,this._meterWidth,this._meterHeight),this._ctx.stroke(),this._ctx.closePath(),this.drawMin(),this.drawMax(),this.drawMarker();const e=this._barY;this._barY=_.getNextPos(this._barY,this._nextBarY,this._speed),this._barY!==e&&(this._dirty=!0)}drawMin(){this._shape.fillRect(this._numberStart,this._viewHeight-this._numberHeight-this._lineWidth/2,this._meterWidth+this._lineWidth,this._numberHeight+this._lineWidth/2,this._minBgColor),this._shape.fillText(String(this._minValue),this._meterWidth,this._meterHeight+this._numberHeight+15,"15px Arial","center",this._minFontColor)}drawMax(){this._shape.fillRect(this._numberStart,0,this._meterWidth+this._lineWidth,this._numberHeight+this._lineWidth/2,this._maxBgColor),this._shape.fillText(String(this._maxValue),this._meterWidth,this._numberHeight-4,"15px Arial","center",this._maxFontColor)}drawMarker(){const t="max"===this._minMax||"min"===this._minMax?this._actualValue:this._internalValue;this._shape.fillRect(this._numberStart+this._meterWidth+this._lineWidth,this._barY-8,this._viewWidth-(this._numberStart+this._meterWidth+this._lineWidth),16,this.markerBgColor),this._shape.fillRect(0,this._barY-this._lineWidth/2,this._numberStart+this._meterWidth+this._lineWidth,this._lineWidth,this.markerBgColor),this._shape.fillText(String(t),(this._viewWidth-this._meterWidth)/4*3+this._meterWidth,this._barY+4,"10px Arial","center",this._markerFontColor)}set value(t){let e=t;this._actualValue=e,e>=this._maxValue?(this._minMax="max",e=this._maxValue):e<=this._minValue?(this._minMax="min",e=this._minValue):this._minMax="normal",this._speed=e<this._internalValue?Math.abs(this._speed):-Math.abs(this._speed),this._nextBarY=this._viewHeight-(e-this._minValue)/(this._maxValue-this._minValue)*this._meterHeight-this._numberHeight,this._internalValue=e,this._dirty=!0}get value(){return this._actualValue}},Heartbeat:class extends n{constructor(t,e={}){super(t,e,e.viewWidth||200,100),this._queue=[],this._lastSec=0,this._timer=null,this._speed=2,this._fontColor=a.black,this._maxQueueCapacity=30,this.drawSeconds()}setOptions(t={}){this._speed=t.speed||2,this._fontColor=t.fontColor||(this.theme?this.theme.black:a.black),this._maxQueueCapacity=t.maxQueueCapacity||30}postConstructor(){super.postConstructor(),this.tick()}destroy(){null!=this._timer&&clearInterval(this._timer),super.destroy()}beat(t={}){const e=t.color||(this.theme?this.theme.green:a.green),i=t.space||0;this._queue.length>=this._maxQueueCapacity&&this._queue.shift(),this._queue.push({time:null,x:-30,color:e,space:i}),this._dirty=!0}tick(){null==this._timer&&(this._timer=setInterval(()=>{this.drawSeconds()},1e3))}drawSeconds(){this._queue.length>=this._maxQueueCapacity&&this._queue.shift();const t=new Date,e=_.leftPadZero(t.getMinutes())+":"+_.leftPadZero(t.getSeconds());e!==this._lastSec&&(this._queue.push({time:e,x:-30}),this._lastSec=e,this._dirty=!0)}isAnimating(){return this._queue.length>0}drawObject(){this._ctx.textAlign="center",this._ctx.font="12px Arial",this._shape.fillRect(0,50,this._viewWidth,2,this._fontColor);for(let t=0;t<this._queue.length;t++){const e=this._queue[t];null!=e.time?(this._ctx.fillStyle=this._fontColor,this._ctx.fillText(e.time,e.x,90),this._shape.fillRect(e.x-1,45,2,12,this._fontColor)):(this._ctx.fillStyle=e.color||this._fontColor,this._ctx.beginPath(),this._ctx.moveTo(e.x-10,50),this._ctx.quadraticCurveTo(e.x-5,2*(e.space||0)-20,e.x,50),this._ctx.quadraticCurveTo(e.x+5,100-1*(e.space||0),e.x+10,50),this._ctx.closePath(),this._ctx.fill()),e.x+=this._speed}this._queue.length>0&&(this._dirty=!0)}},MessageQueue:class extends n{constructor(t,e={}){super(t,e,e.viewWidth||100,e.viewHeight||200),this._queue=[],this._arcWidth=10}setOptions(t={}){this._barHeight=t.barHeight||20,this._speed=t.speed||5,this._space=t.space||5,this._maxQueueCapacity=void 0!==t.maxQueueCapacity?t.maxQueueCapacity:20}isAnimating(){const t=Math.floor(this._viewHeight/(this._barHeight+this._space)),e=Math.min(this._queue.length,t);for(let t=0;t<e;t++){const e=this._queue[t];if((this._barHeight+this._space)*t+this._space<e.y)return!0}return!1}drawObject(){const t=Math.floor(this._viewHeight/(this._barHeight+this._space)),e=Math.min(this._queue.length,t);let i=!1;for(let t=0;t<e;t++){const e=this._queue[t],s=(this._barHeight+this._space)*t+this._space;s<e.y?(e.y-=this._speed,i=!0):e.y=s,this._ctx.fillStyle=e.color,this._shape.fillRect(e.x,e.y,this._viewWidth-2*(this._arcWidth+e.space),this._barHeight,e.color),this._ctx.beginPath(),this._ctx.moveTo(e.x,e.y),this._ctx.quadraticCurveTo(e.x-this._arcWidth,e.y+this._barHeight/2,e.x,e.y+this._barHeight),this._ctx.fill(),this._ctx.closePath(),this._ctx.beginPath(),this._ctx.moveTo(this._viewWidth-this._arcWidth-e.space,e.y),this._ctx.quadraticCurveTo(this._viewWidth-e.space,e.y+this._barHeight/2,this._viewWidth-this._arcWidth-e.space,e.y+this._barHeight),this._ctx.fill(),this._ctx.closePath()}this._dirty=!!i}push(t={}){const e=t.color||(this.theme?this.theme.blue:a.blue),i=t.space||0;this._queue.length>=this._maxQueueCapacity&&this.pop(),this._queue.push({x:this._arcWidth+i,y:this._viewHeight+this._barHeight,color:e,space:i}),this._dirty=!0}pop(){this._queue.length>0&&(this._queue.shift(),this._dirty=!0)}get queueSize(){return this._queue.length}},SpeedCircle:class extends n{constructor(t,e={}){super(t,e,200,200),this._font="25px Arial",this._degree1=0,this._degree2=0,this._degree3=0,this._degree4=0}setOptions(t={}){const e=t.circle1||{},i=t.circle2||{},s=t.circle3||{},h=t.circle4||{},r=t.text||{};this.speed1=void 0!==e.speed?e.speed:.5,this.color1=e.color||(this.theme?this.theme.red:a.red),this.speed2=void 0!==i.speed?i.speed:-.5,this.color2=i.color||(this.theme?this.theme.yellow:a.yellow),this.speed3=void 0!==s.speed?s.speed:.5,this.color3=s.color||(this.theme?this.theme.blue:a.blue),this.speed4=void 0!==h.speed?h.speed:-.5,this.color4=h.color||(this.theme?this.theme.grey:a.grey),this.textColor=r.color||(this.theme?this.theme.green:a.green),this.textValue=void 0!==r.value?r.value:""}isAnimating(){return 0!==this.speed1||0!==this.speed2||0!==this.speed3||0!==this.speed4}drawObject(){this._degree1=_.getNextAngleByDegree(this._degree1,this.speed1),this._degree2=_.getNextAngleByDegree(this._degree2,this.speed2),this._degree3=_.getNextAngleByDegree(this._degree3,this.speed3),this._degree4=_.getNextAngleByDegree(this._degree4,this.speed4);const t=_.getAngleByDegree(this._degree1),e=_.getAngleByDegree(this._degree2),i=_.getAngleByDegree(this._degree3),s=_.getAngleByDegree(this._degree4);this._ctx.translate(100,100),this._ctx.rotate(t),this._ctx.strokeStyle=this.color1,this._ctx.lineWidth=8;let h=.5,r=0,o=h;for(let t=0;t<6;t++)this._ctx.beginPath(),this._ctx.arc(0,0,90,Math.PI*r,Math.PI*o),this._ctx.stroke(),this._ctx.closePath(),r=o+.02,h/=1.7,o=r+h;this._ctx.restore(),this.save(),this._ctx.translate(100,100),this._ctx.rotate(i);for(let t=0;t<360;t+=9){const e=_.getAngleByDegree(t),i=64*Math.cos(e),s=64*Math.sin(e);this._shape.fillCircle(i,s,3,this.color3)}this._ctx.restore(),this.save(),this._ctx.translate(100,100),this._ctx.rotate(e);for(let t=0;t<360;t+=8){const e=_.getAngleByDegree(t),i=70*Math.cos(e),s=70*Math.sin(e),h=83*Math.cos(e),r=83*Math.sin(e);this._shape.line(i,s,h,r,6,this.color2)}this._ctx.restore(),this.save(),this._ctx.translate(100,100),this._ctx.rotate(s),this._ctx.lineWidth=5,this._ctx.strokeStyle=this.color4;const a=1.76/12;let l=0,n=a;for(let t=0;t<12;t++)this._ctx.beginPath(),this._ctx.arc(0,0,56,Math.PI*l,Math.PI*n),this._ctx.stroke(),this._ctx.closePath(),l=n+.02,n=l+a;this._ctx.restore(),this.save(),this._shape.fillText(String(this.textValue),100,110,this._font,"center",this.textColor),0===this.speed1&&0===this.speed2&&0===this.speed3&&0===this.speed4||(this._dirty=!0)}},TextMeter:class extends n{constructor(t,e={}){super(t,e,e.viewWidth||200,100),this._lineWidth=5,this._arrowWidth=30,this._pctHeight=30,this._arrow=null,this._arrowSpeed=.6,this._leftArrowX=-5,this.markerBgColor=a.black,this.markerFontColor=a.white,this.speed=5,this.fillColor=a.red,this.bgColor=a.lightWhite,this._lineColor=a.lightGreen,this._percentageValue=0,this.displayValue="",this.arrowColor=a.blue,this._actualPctHeight=this._pctHeight-this._lineWidth/2,this._meterWidth=this._viewWidth-2*this._arrowWidth,this._meterHeight=100-this._pctHeight-this._lineWidth/2,this._middleBarHeight=this._meterHeight/2+this._pctHeight,this._barX=this._percentageValue/100*this._meterWidth+this._arrowWidth,this._nextBarX=this._barX,this._rightArrowX=this._viewWidth+5}setOptions(t={}){const e=t.bar||{},i=t.marker||{};this.markerBgColor=i.bgColor||(this.theme?this.theme.black:a.black),this.markerFontColor=i.fontColor||(this.theme?this.theme.white:a.white),this.speed=e.speed||5,this.fillColor=e.fillColor||(this.theme?this.theme.red:a.red),this.bgColor=e.bgColor||(this.theme?this.theme.lightWhite:a.lightWhite),this._lineColor=e.borderColor||(this.theme?this.theme.lightGreen:a.lightGreen),this._percentageValue=t.value||0,this.displayValue=t.displayValue||"",this.arrowColor=t.arrowColor||(this.theme?this.theme.blue:a.blue)}isAnimating(){return this._barX!==this._nextBarX||null!==this._arrow}drawObject(){this._ctx.globalCompositeOperation="destination-over",this._ctx.save(),this._ctx.beginPath(),this._ctx.rect(this._arrowWidth,this._pctHeight,this._barX-this._arrowWidth,this._meterHeight),this._ctx.clip(),this._shape.fillText(this.displayValue,this._viewWidth/2,75,"30px Arial","center",this.bgColor),this._ctx.fillStyle=this.fillColor,this._ctx.fillRect(this._arrowWidth,this._pctHeight,this._barX-this._arrowWidth,this._meterHeight),this._ctx.restore(),this._ctx.save(),this._ctx.globalCompositeOperation="destination-over",this._ctx.beginPath(),this._ctx.rect(this._barX,this._pctHeight,this._viewWidth-this._barX-this._arrowWidth,this._meterHeight),this._ctx.clip(),this._shape.fillText(this.displayValue,this._viewWidth/2,75,"30px Arial","center",this.fillColor),this._shape.fillRect(this._barX,this._pctHeight,this._viewWidth-this._barX-this._arrowWidth,this._meterHeight,this.bgColor),this._ctx.restore(),this._ctx.save(),this._ctx.globalCompositeOperation="source-over",this._ctx.lineWidth=this._lineWidth,this._ctx.strokeStyle=this._lineColor,this._ctx.beginPath(),this._ctx.rect(this._arrowWidth,this._pctHeight,this._meterWidth,this._meterHeight),this._ctx.stroke(),this._ctx.closePath(),this._ctx.fillStyle=this.markerBgColor,this._ctx.fillRect(this._barX-25,0,50,this._actualPctHeight),this._shape.fillText(this._percentageValue+"%",this._barX,20,"16px Arial","center",this.markerFontColor),this._ctx.beginPath(),this._ctx.fillStyle=this.markerBgColor,this._ctx.moveTo(this._barX-8,this._actualPctHeight-this._lineWidth/2),this._ctx.lineTo(this._barX,this._pctHeight+this._lineWidth/2),this._ctx.lineTo(this._barX+8,this._actualPctHeight-this._lineWidth/2),this._ctx.fill(),this._ctx.closePath(),null===this._arrow?(this.drawLeftArrow(),this.drawRightArrow()):"left"===this._arrow?this.drawLeftArrow():this.drawRightArrow(),this._ctx.restore();const t=this._barX;this._barX=_.getNextPos(this._barX,this._nextBarX,this.speed),this._barX===t&&null===this._arrow||(this._dirty=!0)}drawLeftArrow(){this._leftArrowX<=0?this._leftArrowX=this._arrowWidth-3:this._leftArrowX=_.getNextPos(this._leftArrowX,0,-this._arrowSpeed),this._shape.fillTriangle(this._leftArrowX,this._actualPctHeight+10,this._leftArrowX-20,this._middleBarHeight,this._leftArrowX,90,this.arrowColor)}drawRightArrow(){this._rightArrowX>=this._viewWidth?this._rightArrowX=this._arrowWidth+3+this._meterWidth:this._rightArrowX=_.getNextPos(this._rightArrowX,this._viewWidth,this._arrowSpeed),this._shape.fillTriangle(this._rightArrowX,this._actualPctHeight+10,this._rightArrowX+20,this._middleBarHeight,this._rightArrowX,90,this.arrowColor)}set value(t){t>=0&&t<=100&&(t<this._percentageValue?(this.speed=-Math.abs(this.speed),this._arrow="left"):t>this._percentageValue?(this.speed=Math.abs(this.speed),this._arrow="right"):this._arrow=null,this._percentageValue=Math.floor(t),this._nextBarX=this._percentageValue/100*this._meterWidth+this._arrowWidth,this._dirty=!0)}get value(){return this._percentageValue}},RoundFan:class extends n{constructor(t,e={}){super(t,e,200,200),this._degree=0}setOptions(t={}){const e=t.center||{};this.fanColor=t.fanColor||(this.theme?this.theme.green:a.green),this.centerColor=e.color||(this.theme?this.theme.green:a.green),this.centerBgColor=e.bgColor||(this.theme?this.theme.white:a.white),this.speed=void 0!==t.speed?t.speed:1}isAnimating(){return 0!==this.speed}drawObject(){this._degree=_.getNextAngleByDegree(this._degree,this.speed);const t=_.getAngleByDegree(this._degree);this._ctx.translate(100,100),this._ctx.rotate(t),this._ctx.beginPath(),this._ctx.moveTo(0,0),this._ctx.quadraticCurveTo(-60,-80,0,-90),this._ctx.quadraticCurveTo(80,-100,0,0),this._ctx.quadraticCurveTo(80,-60,90,0),this._ctx.quadraticCurveTo(100,80,0,0),this._ctx.quadraticCurveTo(60,80,0,90),this._ctx.quadraticCurveTo(-80,100,0,0),this._ctx.quadraticCurveTo(-80,60,-90,0),this._ctx.quadraticCurveTo(-100,-80,0,0),this._ctx.fillStyle=this.fanColor,this._ctx.fill(),this._ctx.closePath(),this._shape.fillCircle(0,0,35,this.centerBgColor),this._shape.fillCircle(0,0,30,this.centerColor),this._shape.fillCircle(0,0,10,this.centerBgColor),0!==this.speed&&(this._dirty=!0)}},TextBox:class extends n{constructor(t,e={}){super(t,e,e.viewWidth||200,100),this._borderWidth=8,this._borderHeight=30,this._space=10,this._waveY=0,this._waveSpeed=1,this._isWaveOn=!1,this._textValue="",this.textColor=a.white,this.textBgColor=a.blue,this.bgColor="rgba(0, 0, 0, 0.01)",this.borderColor=a.blue,this.waveColor=a.blue}setOptions(t={}){const e=t.text||{};this._textValue=e.value||"",this.textColor=e.fontColor||(this.theme?this.theme.white:a.white),this.textBgColor=e.bgColor||(this.theme?this.theme.blue:a.blue),this.bgColor=t.bgColor||"rgba(0, 0, 0, 0.01)",this.borderColor=t.borderColor||(this.theme?this.theme.blue:a.blue),this.waveColor=t.waveColor||(this.theme?this.theme.blue:a.blue)}clear(){this._ctx.fillStyle=this.bgColor,this._ctx.fillRect(this._x,this._y,this._width,this._height)}isAnimating(){return this._isWaveOn}drawObject(){if(this._ctx.textAlign="center",this._isWaveOn){const t=1;this._waveY>=this._viewHeight/2+t?(this._waveY=0,this._isWaveOn=!1):(this._ctx.fillStyle=this.waveColor,this._ctx.beginPath(),this._ctx.fillRect(0,this._waveY,this._viewWidth+t,t),this._ctx.closePath(),this._ctx.beginPath(),this._ctx.fillRect(0,this._viewHeight-this._waveY-t,this._viewWidth,t),this._ctx.closePath(),this._waveY=_.getNextPos(this._waveY,this._viewHeight/2+t,this._waveSpeed),this._dirty=!0)}this._ctx.fillStyle=this.borderColor,this._ctx.fillRect(0,0,this._borderHeight,this._borderWidth),this._ctx.fillRect(0,0,this._borderWidth,this._borderHeight),this._ctx.fillRect(0,this._viewHeight-this._borderHeight,this._borderWidth,this._borderHeight),this._ctx.fillRect(0,this._viewHeight-this._borderWidth,this._borderHeight,this._borderWidth),this._ctx.fillRect(this._viewWidth-this._borderHeight,0,this._borderHeight,this._borderWidth),this._ctx.fillRect(this._viewWidth-this._borderWidth,0,this._borderWidth,this._borderHeight),this._ctx.fillRect(this._viewWidth-this._borderHeight,this._viewHeight-this._borderWidth,this._borderHeight,this._borderWidth),this._ctx.fillRect(this._viewWidth-this._borderWidth,this._viewHeight-this._borderHeight,this._borderWidth,this._borderHeight),this._ctx.fillStyle=this.textBgColor,this._ctx.fillRect(this._borderWidth+this._space,this._borderWidth+this._space,this._viewWidth-2*(this._borderWidth+this._space),this._viewHeight-2*(this._borderWidth+this._space)),this._shape.fillText(String(this._textValue),this._viewWidth/2,this._viewHeight-35,"40px Arial","center",this.textColor)}set value(t){this._textValue=t,this._isWaveOn=!0,this._dirty=!0}get value(){return this._textValue}},NetworkGraph:class extends n{constructor(t,e={}){super(t,e,e.viewWidth||200,e.viewHeight||200),this._nodes=[],this._signalQueues=[]}setOptions(t={}){this._nodes=t.nodes||[]}drawObject(){this.drawOffscreen();const t=[];let e=!1;for(let i=0;i<this._signalQueues.length;i++){const s=this._signalQueues[i],h=s.x,r=s.y;this._signalQueues[i].x=_.getNextPos(s.x,s.destX,s.speedX),this._signalQueues[i].y=_.getNextPos(s.y,s.destY,s.speedY),this._signalQueues[i].x===s.destX&&this._signalQueues[i].y===s.destY?t.push(i):this._shape.fillCircle(s.x,s.y,s.size,s.color),this._signalQueues[i].x===h&&this._signalQueues[i].y===r||(e=!0)}for(let i=t.length-1;i>=0;i--)this._signalQueues.splice(t[i],1),e=!0;e&&(this._dirty=!0)}drawStatic(){this._nodes.forEach(t=>{(t.neighbors||[]).forEach(e=>{const i=this.getNodeById(e.id);if(i){const s=e.edge||{},h=s.width||1,r=s.color||(this.theme?this.theme.grey:a.grey),o=s.dash||[];this._offscreenCtx.beginPath(),0!==o.length?this._offscreenCtx.setLineDash(o):this._offscreenCtx.setLineDash([]),this._offscreenCtx.lineWidth=h,this._offscreenCtx.strokeStyle=r,this._offscreenCtx.moveTo(t.x,t.y),this._offscreenCtx.lineTo(i.x,i.y),this._offscreenCtx.stroke(),this._offscreenCtx.closePath()}})}),this._nodes.forEach(t=>{const e=t.text||{},i=e.value||"",s=e.color||(this.theme?this.theme.black:a.black),h=e.font||"12px Arial",r=e.xOffset||0,o=e.yOffset||0;this._offscreenCtx.beginPath(),this._offscreenCtx.fillStyle=t.color,this._offscreenCtx.arc(t.x,t.y,t.size,0,2*Math.PI),this._offscreenCtx.fill(),this._offscreenCtx.closePath(),this._offscreenCtx.beginPath(),this._offscreenCtx.font=h,this._offscreenCtx.textAlign="center",this._offscreenCtx.fillStyle=s,this._offscreenCtx.fillText(i,t.x+r,t.y+o),this._offscreenCtx.closePath()})}getNodeById(t){return this._nodes.find(e=>e.id===t)}addNodes(t=[]){this._nodes.push(...t),this._staticRendered=!1,this._dirty=!0}addNeighbor(t,e={id:""}){for(let i=0;i<this._nodes.length;i++)if(this._nodes[i].id===t){this._nodes[i].neighbors=this._nodes[i].neighbors||[],this._nodes[i].neighbors.push(e);break}this._staticRendered=!1,this._dirty=!0}isAnimating(){return this._signalQueues.length>0}signal(t){const e=t.color||(this.theme?this.theme.black:a.black),i=t.duration||2e3,s=t.size||3,h=this.getNodeById(t.from),r=this.getNodeById(t.to);if(h&&r){const t=Math.abs(r.x-h.x)/(i/60),o=Math.abs(r.y-h.y)/(i/60),a=r.x>h.x?t:-t,_=r.y>h.y?o:-o;this._signalQueues.push({x:h.x,y:h.y,destX:r.x,destY:r.y,speedX:a,speedY:_,color:e,size:s}),this._dirty=!0}}get nodes(){return this._nodes}},HexGrid:class extends n{constructor(t,e={}){super(t,e,e.viewWidth||200,e.viewHeight||200),this._nodes=[],this._space=5,this._radius=20,this._border=3}setOptions(t={}){this._space=t.space||5,this._radius=t.radius||20,this._border=t.border||3}isAnimating(){return this._nodes.some(t=>t.blink.on)}drawObject(){this.drawOffscreen();const t=this._space,e=this._radius,i=Math.pow(3,.5)*e/2,s=Date.now();let h=!1;this._nodes.forEach(r=>{if(r.blink.on){h=!0;const o=r.blink.interval,a=r.blink.lastCall;if(s-a<o){const s=r.x%2==0?t+i:3*t/2+2*i,h=t+e+(i+t/2)*Math.pow(3,.5)*r.x;this.drawHex(s+(2*i+t)*r.y,h,e,r.blink.bgColor,r.blink.borderColor,r.blink.text,r.text.xOffset||0,r.text.yOffset||0)}else s-a>=2*o&&(r.blink.lastCall=s)}}),h&&(this._dirty=!0)}drawStatic(){const t=this._space,e=this._radius,i=Math.pow(3,.5)*e/2;this._offscreenCtx.lineWidth=this._border,this._nodes.forEach(s=>{const h=s.x%2==0?t+i:3*t/2+2*i,r=t+e+(i+t/2)*Math.pow(3,.5)*s.x,o=h+(2*i+t)*s.y;this._offscreenCtx.strokeStyle=s.borderColor,this._offscreenCtx.beginPath(),this._offscreenCtx.moveTo(o,r-e),this._offscreenCtx.lineTo(o+i,r-e/2),this._offscreenCtx.lineTo(o+i,r+e/2),this._offscreenCtx.lineTo(o,r+e),this._offscreenCtx.lineTo(o-i,r+e/2),this._offscreenCtx.lineTo(o-i,r-e/2),this._offscreenCtx.lineTo(o,r-e),this._offscreenCtx.closePath(),this._offscreenCtx.stroke(),this._offscreenCtx.fillStyle=s.bgColor,this._offscreenCtx.fill(),this._offscreenCtx.beginPath(),this._offscreenCtx.font=s.text.font||"12px Arial",this._offscreenCtx.textAlign="center",this._offscreenCtx.fillStyle=s.text.color,this._offscreenCtx.fillText(String(s.text.value),o+(s.text.xOffset||0),r+(s.text.yOffset||0)),this._offscreenCtx.closePath()})}drawHex(t,e,i,s,h,r,o,a){const _=Math.pow(3,.5)*i/2;this._ctx.strokeStyle=h,this._ctx.beginPath(),this._ctx.moveTo(t,e-i),this._ctx.lineTo(t+_,e-i/2),this._ctx.lineTo(t+_,e+i/2),this._ctx.lineTo(t,e+i),this._ctx.lineTo(t-_,e+i/2),this._ctx.lineTo(t-_,e-i/2),this._ctx.lineTo(t,e-i),this._ctx.closePath(),this._ctx.stroke(),this._ctx.fillStyle=s,this._ctx.fill(),this._shape.fillText(String(r.value),t+o,e+a,r.font||"12px Arial","center",r.color)}saveHex(t){const e=t.text||{},i={id:t.id,x:t.x,y:t.y,bgColor:t.bgColor||(this.theme?this.theme.white:a.white),borderColor:t.borderColor||(this.theme?this.theme.white:a.white),text:{value:void 0!==e.value?e.value:"",color:e.color||(this.theme?this.theme.black:a.black),font:e.font||"12px Arial",xOffset:e.xOffset||0,yOffset:e.yOffset||0},blink:{text:{value:"",color:this.theme?this.theme.black:a.black},borderColor:t.borderColor||(this.theme?this.theme.white:a.white),bgColor:this.theme?this.theme.red:a.red,interval:1e3,on:!1,lastCall:0}},s=this._nodes.findIndex(t=>t.id===i.id);-1!==s?this._nodes[s]=i:this._nodes.push(i),this._staticRendered=!1,this._dirty=!0}blinkOn(t){const e=t.text||{};for(let i=0;i<this._nodes.length;i++)if(this._nodes[i].id===t.id){this._nodes[i].blink.text.value=void 0!==e.value?e.value:"",this._nodes[i].blink.text.color=e.color||(this.theme?this.theme.black:a.black),this._nodes[i].blink.borderColor=t.borderColor||(this.theme?this.theme.white:a.white),this._nodes[i].blink.bgColor=t.bgColor||(this.theme?this.theme.red:a.red),this._nodes[i].blink.interval=t.interval||1e3,this._nodes[i].blink.on=!0,this._dirty=!0;break}}blinkOff(t){for(let e=0;e<this._nodes.length;e++)if(this._nodes[e].id===t){this._nodes[e].blink.on=!1,this._dirty=!0;break}}},ScoreBoard:class extends n{constructor(t,e={}){super(t,e,e.viewWidth||200,e.viewHeight||200),this._rows=[]}setOptions(t={}){this._rowHeight=t.rowHeight||20,this._space=t.space||0,this._font=t.font||"10px Arial",this._speed=t.speed||5,this._order=void 0!==t.order?t.order:"asc"}sort(){"asc"===this._order?this._rows.sort((t,e)=>t.score-e.score):this._rows.sort((t,e)=>e.score-t.score)}isAnimating(){for(let t=0;t<this._rows.length;t++){const e=this._rows[t];if("move"===e.moveType){const i=t*(this._rowHeight+this._space);if(e.y!==i)return!0}else if("remove"===e.moveType)return!0}return!1}drawObject(){let t=!1;for(let e=0;e<this._rows.length;e++){const i=this._rows[e];if(this._shape.fillRect(i.x,i.y,this._viewWidth,this._rowHeight,i.bgColor),this._shape.fillText(String(i.text.value),i.x+i.text.xOffset,i.y+i.text.yOffset,this._font,"left",i.text.color),"move"===i.moveType){const s=e*(this._rowHeight+this._space);if(i.y!==s){const h=s>i.y?this._speed:-this._speed;this._rows[e].y=_.getNextPos(i.y,s,h),t=!0}}else if("remove"===i.moveType){i.destX<0&&i.x===i.destX&&(this._rows[e].speedX=2*this._speed,this._rows[e].destX=this._viewWidth+10);const s=i.x;this._rows[e].x=_.getNextPos(i.x,this._rows[e].destX,this._rows[e].speedX),this._rows[e].x!==s&&(t=!0)}}for(let e=this._rows.length-1;e>=0;e--){const i=this._rows[e];"remove"===i.moveType&&i.destX>0&&i.x===i.destX&&(this._rows.splice(e,1),t=!0)}t&&(this._dirty=!0)}update(t){const e=t.id,i=t.text||{};let s=!1;for(let h=0;h<this._rows.length;h++)if(this._rows[h].id===e){void 0!==t.score&&this._rows[h].score!==t.score&&(s=!0,this._rows[h].score=t.score),this._rows[h].moveType="move",this._rows[h].bgColor=t.bgColor||this._rows[h].bgColor,this._rows[h].text.value=void 0!==i.value?i.value:this._rows[h].text.value,this._rows[h].text.color=i.color||this._rows[h].text.color;break}s&&this.sort(),this._dirty=!0}remove(t){let e=!1;for(let i=0;i<this._rows.length;i++)if(this._rows[i].id===t&&"remove"!==this._rows[i].moveType){this._rows[i].moveType="remove",this._rows[i].speedX=-this._speed,this._rows[i].destX=-40,e=!0;break}e&&this.sort(),this._dirty=!0}add(t){for(let e=0;e<this._rows.length;e++)if(this._rows[e].id===t.id)return;const e=t.text||{},i={id:t.id,score:t.score||0,bgColor:t.bgColor||(this.theme?this.theme.blue:a.blue),text:{value:void 0!==e.value?e.value:"",color:e.color||(this.theme?this.theme.white:a.white),xOffset:e.xOffset||0,yOffset:e.yOffset||0},x:0,y:this._viewHeight,destX:0,destY:0,speedX:0,speedY:0,moveType:"move"};this._rows.push(i),this.sort(),this._dirty=!0}get rows(){return this._rows}}};return s.render(),e.default})());
//# sourceMappingURL=zeu.min.js.map